var c=window.Hotnews=window.Hotnews||{},y=[],h=!1;function w(t){h?t():y.push(t)}document.addEventListener("DOMContentLoaded",function(){h=!0,y.forEach(t=>{try{t()}catch(e){console.error("Ready handler error:",e)}})});function x(t){return String(t||"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function b(t){let e=t==null?"":String(t).trim();if(!e)return e;let r=e.match(/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})(?::\d{2})?$/);return r?`${r[2]}-${r[3]} ${r[4]}:${r[5]}`:(e.match(/^(\d{2})-(\d{2})\s+(\d{2}):(\d{2})$/),e)}c.ready=w;c.escapeHtml=x;c.formatUpdatedAt=b;function T(t){if(t==null||t==="")return"";try{let r=Date.now(),n=Math.floor(r/1e3)+7*24*60*60,i=r+7*24*60*60*1e3,o=Number(t);if(Number.isFinite(o)&&o>0){let l;if(o>1e12){if(o<9466848e5||o>i)return"";l=o}else{if(o<946684800||o>n)return"";l=o*1e3}let d=new Date(l);if(!isNaN(d.getTime())){let f=String(d.getMonth()+1).padStart(2,"0"),m=String(d.getDate()).padStart(2,"0"),p=d.getFullYear();return p<2e3||p>new Date().getFullYear()+1?"":`${f}-${m}`}}let s=String(t||"").trim().match(/^(\d{4})-(\d{2})-(\d{2})/);if(s){let l=parseInt(s[1],10),d=parseInt(s[2],10),f=parseInt(s[3],10),m=new Date().getFullYear();return l<2e3||l>m+1||d<1||d>12||f<1||f>31?"":`${s[2]}-${s[3]}`}}catch{}return""}c.formatNewsDate=T;var a={container:null,nextId:1,items:new Map};function M(){if(a.container)return a.container;let t=document.createElement("div");t.id="tr-toast-container",t.style.position="fixed",t.style.right="16px",t.style.bottom="16px",t.style.display="flex",t.style.flexDirection="column",t.style.gap="10px",t.style.zIndex="99999";try{document.body.appendChild(t)}catch{}return a.container=t,t}function S(t){let e=String(t||"info");return e==="loading"?{bg:"#111827",fg:"#fff",border:"#111827"}:e==="success"?{bg:"#16a34a",fg:"#fff",border:"#16a34a"}:e==="error"?{bg:"#dc2626",fg:"#fff",border:"#dc2626"}:{bg:"#111827",fg:"#fff",border:"#111827"}}function g(t,e,r){let n=S(r);t.className="tr-toast",t.style.display="flex",t.style.alignItems="center",t.style.gap="10px",t.style.padding="10px 12px",t.style.borderRadius="10px",t.style.background=n.bg,t.style.color=n.fg,t.style.border=`1px solid ${n.border}`,t.style.boxShadow="0 10px 20px rgba(0,0,0,0.18)",t.style.fontSize="0.9rem",t.style.maxWidth="360px",t.style.wordBreak="break-word";let o=String(r||"info")==="loading"?'<span aria-hidden="true" style="display:inline-block;width:10px;height:10px;border-radius:50%;background:#60a5fa;box-shadow:0 0 0 2px rgba(96,165,250,0.3);"></span>':"";t.innerHTML=`${o}<div class="tr-toast-msg">${x(e||"")}</div>`}c.toast={show(t,e={}){let r=`toast-${a.nextId++}`,n=M(),i=document.createElement("div");i.dataset.toastId=r,g(i,t,e.variant);try{n.appendChild(i)}catch{}let o={id:r,el:i,hideTimer:0};a.items.set(r,o);let u=Number(e.durationMs||0);return u>0&&(o.hideTimer=window.setTimeout(()=>{c.toast.hide(r)},u)),r},update(t,e,r={}){let n=a.items.get(String(t||""));if(!n)return;n.hideTimer&&(window.clearTimeout(n.hideTimer),n.hideTimer=0),g(n.el,e,r.variant);let i=Number(r.durationMs||0);i>0&&(n.hideTimer=window.setTimeout(()=>{c.toast.hide(t)},i))},hide(t){let e=a.items.get(String(t||""));if(e){e.hideTimer&&(window.clearTimeout(e.hideTimer),e.hideTimer=0);try{e.el.remove()}catch{}a.items.delete(String(t||""))}}};export{c as a,w as b,x as c,b as d,T as e};
